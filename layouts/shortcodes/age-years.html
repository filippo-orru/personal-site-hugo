<!-- Don't format this file, or the html whitespace gets broken-->

{{- $id := print "age-years" (substr (md5 .Inner) 0 16) -}}
<code id="{{ $id }}" class="inline-time"></code><script>
        /**
         * Calculates human age in years given a birth day. 
         *
         * @param string|Date Object birthDate
         * @returns integer Age between birthday and a given date or today
         */
        function gregorianAge(birthDate) {
            if (birthDate == null) return null;
            ageAtDate = new Date();

            var _m = ageAtDate.getMonth() - birthDate.getMonth();
            // answer: ageAt year minus birth year less one (1) if month and day of
            // ageAt year is before month and day of birth year
            return (ageAtDate.getFullYear()) - birthDate.getFullYear()
                - ((_m < 0 || (_m === 0 && ageAtDate.getDate() < birthDate.getDate())) ? 1 : 0);
        }


        var date = new Date('{{ .Get 0 }}');
        var span = document.getElementById('{{ $id }}');

        var age = gregorianAge(date);
        span.innerText = age;
</script>